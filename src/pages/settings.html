<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Param√®tres Syst√®me - ISET Inventory</title>
    <link rel="stylesheet" href="../styles/style.css">
    <style>
        .settings-container {
            max-width: 900px;
            margin: 0 auto;
        }

        .settings-section {
            background: white;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .settings-section h3 {
            margin-top: 0;
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 12px;
        }

        .setting-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #ecf0f1;
        }

        .setting-item:last-child {
            border-bottom: none;
        }

        .setting-label {
            flex: 1;
        }

        .setting-label strong {
            display: block;
            margin-bottom: 4px;
            color: #2c3e50;
        }

        .setting-label .description {
            font-size: 13px;
            color: #7f8c8d;
        }

        .setting-control {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        input[type="number"],
        input[type="text"],
        select {
            padding: 8px 12px;
            border: 1px solid #bdc3c7;
            border-radius: 4px;
            font-size: 14px;
        }

        input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .btn-save {
            background: #27ae60;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .btn-save:hover {
            background: #229954;
        }

        .btn-reset {
            background: #e74c3c;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
        }

        .btn-reset:hover {
            background: #c0392b;
        }

        .category-list {
            list-style: none;
            padding: 0;
            margin: 12px 0;
        }

        .category-list li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px 12px;
            background: #f8f9fa;
            margin-bottom: 8px;
            border-radius: 4px;
        }

        .category-list button {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 4px 8px;
            border-radius: 3px;
            cursor: pointer;
            font-size: 12px;
        }

        .category-list button:hover {
            background: #c0392b;
        }

        .add-category {
            display: flex;
            gap: 8px;
            margin-top: 12px;
        }

        .add-category input {
            flex: 1;
        }

        .add-category button {
            background: #3498db;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
        }

        .add-category button:hover {
            background: #2980b9;
        }

        .status-message {
            padding: 12px;
            border-radius: 4px;
            margin-bottom: 16px;
            display: none;
        }

        .status-message.success {
            background: #d4edda;
            color: #155724;
            display: block;
            border: 1px solid #c3e6cb;
        }

        .status-message.error {
            background: #f8d7da;
            color: #721c24;
            display: block;
            border: 1px solid #f5c6cb;
        }

        .danger-zone {
            background: #fff5f5;
            border: 2px solid #e74c3c;
            padding: 16px;
            border-radius: 8px;
            margin-top: 24px;
        }

        .danger-zone h4 {
            color: #e74c3c;
            margin-top: 0;
        }

        .info-box {
            background: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 12px;
            margin: 12px 0;
            border-radius: 4px;
            font-size: 13px;
            color: #1565c0;
        }
    </style>
</head>
<body>
    <script src="../scripts/access-guard.js"></script>
    
    <div class="navbar">
        <div class="nav-container">
            <h1 class="logo">ISET Inventory</h1>
            <div class="nav-right">
                <span class="user-info">Utilisateur: <strong id="currentUser">-</strong></span>
                <button class="btn-logout" onclick="logoutUser()">D√©connexion</button>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="settings-container">
            <h1>‚öôÔ∏è Param√®tres Syst√®me</h1>
            
            <div id="statusMessage" class="status-message"></div>

            <!-- Section 1: Seuils et Alertes -->
            <div class="settings-section">
                <h3>üìä Seuils et Alertes</h3>
                
                <div class="setting-item">
                    <div class="setting-label">
                        <strong>Seuil de stock faible</strong>
                        <span class="description">Articles avec quantit√© inf√©rieure √† cette valeur seront alert√©s (par d√©faut: 5)</span>
                    </div>
                    <div class="setting-control">
                        <input type="number" id="lowStockThreshold" min="0" max="100" value="5">
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <strong>Notifier des stocks faibles</strong>
                        <span class="description">Afficher les alertes sur le dashboard</span>
                    </div>
                    <div class="setting-control">
                        <input type="checkbox" id="enableNotifications" checked>
                    </div>
                </div>

                <div class="info-box">
                    üí° Les seuils s'appliquent automatiquement √† tous les rapports et tableaux
                </div>
            </div>

            <!-- Section 2: Cat√©gories -->
            <div class="settings-section">
                <h3>üìÇ Gestion des Cat√©gories</h3>
                
                <p>Cat√©gories disponibles actuellement :</p>
                <ul class="category-list" id="categoryList">
                    <!-- Rempli dynamiquement -->
                </ul>

                <div class="add-category">
                    <input type="text" id="newCategoryInput" placeholder="Nouvelle cat√©gorie...">
                    <button onclick="addCategory()">Ajouter</button>
                </div>

                <div class="info-box">
                    üí° Cr√©ez des cat√©gories personnalis√©es pour votre inventaire
                </div>
            </div>

            <!-- Section 3: Pr√©f√©rences d'Affichage -->
            <div class="settings-section">
                <h3>üé® Affichage et Interface</h3>

                <div class="setting-item">
                    <div class="setting-label">
                        <strong>Articles par page</strong>
                        <span class="description">Nombre d'articles affich√©s dans les tableaux</span>
                    </div>
                    <div class="setting-control">
                        <select id="itemsPerPage">
                            <option value="10">10 articles</option>
                            <option value="25">25 articles</option>
                            <option value="50">50 articles</option>
                            <option value="100">100 articles</option>
                        </select>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <strong>Format de date</strong>
                        <span class="description">Format utilis√© pour afficher les dates</span>
                    </div>
                    <div class="setting-control">
                        <select id="dateFormat">
                            <option value="FR">JJ/MM/AAAA (Fran√ßais)</option>
                            <option value="EN">MM/DD/YYYY (Anglais)</option>
                            <option value="ISO">YYYY-MM-DD (ISO)</option>
                        </select>
                    </div>
                </div>

                <div class="setting-item">
                    <div class="setting-label">
                        <strong>Activer le mode sombre</strong>
                        <span class="description">Interface plus facile sur les yeux (√† venir)</span>
                    </div>
                    <div class="setting-control">
                        <input type="checkbox" id="darkMode" disabled>
                    </div>
                </div>
            </div>

            <!-- Section 4: Export et Import -->
            <div class="settings-section">
                <h3>üì§ Sauvegarde et Restauration</h3>

                <div class="setting-item" style="flex-wrap: wrap;">
                    <div class="setting-label">
                        <strong>Exporter les param√®tres</strong>
                        <span class="description">T√©l√©charger vos param√®tres en fichier JSON</span>
                    </div>
                    <div class="setting-control">
                        <button class="btn-save" onclick="exportSettings()">Exporter</button>
                    </div>
                </div>

                <div class="setting-item" style="flex-wrap: wrap;">
                    <div class="setting-label">
                        <strong>Restaurer les param√®tres</strong>
                        <span class="description">Charger une configuration sauvegard√©e</span>
                    </div>
                    <div class="setting-control">
                        <input type="file" id="importFile" accept=".json">
                        <button class="btn-save" onclick="importSettings()">Restaurer</button>
                    </div>
                </div>

                <div class="info-box">
                    üí° Utile pour transf√©rer vos param√®tres vers un autre navigateur
                </div>
            </div>

            <!-- Section 5: Maintenance -->
            <div class="settings-section">
                <h3>üîß Maintenance</h3>

                <div class="setting-item" style="flex-wrap: wrap;">
                    <div class="setting-label">
                        <strong>Nettoyer le cache</strong>
                        <span class="description">Lib√©rer l'espace de stockage local</span>
                    </div>
                    <div class="setting-control">
                        <button class="btn-reset" onclick="clearCache()">Nettoyer</button>
                    </div>
                </div>

                <div class="setting-item" style="flex-wrap: wrap;">
                    <div class="setting-label">
                        <strong>V√©rifier l'int√©grit√© des donn√©es</strong>
                        <span class="description">V√©rifier et r√©parer les donn√©es corrompues</span>
                    </div>
                    <div class="setting-control">
                        <button class="btn-save" onclick="window.location.href='../pages/diagnostic.html'">Lancer diagnostic</button>
                    </div>
                </div>
            </div>

            <!-- Section 6: Danger Zone -->
            <div class="danger-zone">
                <h4>‚ö†Ô∏è Zone Dangereuse</h4>
                <p>Ces actions sont <strong>irr√©versibles</strong>. Utilisez-les avec prudence !</p>

                <div class="setting-item" style="flex-wrap: wrap;">
                    <div class="setting-label">
                        <strong>R√©initialiser tous les param√®tres</strong>
                        <span class="description">Restaurer les param√®tres par d√©faut</span>
                    </div>
                    <div class="setting-control">
                        <button class="btn-reset" onclick="resetAllSettings()">R√©initialiser</button>
                    </div>
                </div>

                <div class="setting-item" style="flex-wrap: wrap;">
                    <div class="setting-label">
                        <strong>Supprimer tous les param√®tres et donn√©es</strong>
                        <span class="description">ATTENTION: Cette action effacera TOUS les param√®tres, cat√©gories personnalis√©es et donn√©es syst√®me</span>
                    </div>
                    <div class="setting-control">
                        <button class="btn-reset" onclick="deleteAllSystemData()">SUPPRIMER TOUT</button>
                    </div>
                </div>
            </div>

            <!-- Boutons d'action -->
            <div style="margin-top: 24px; display: flex; gap: 12px; justify-content: flex-end;">
                <button class="btn-reset" onclick="goBack()">Retour</button>
                <button class="btn-save" onclick="saveAllSettings()">üíæ Enregistrer les param√®tres</button>
            </div>
        </div>
    </div>

    <script src="../scripts/auth.js"></script>
    <script src="../scripts/script.js"></script>
    <script src="../scripts/settings.js"></script>
</body>
</html>
